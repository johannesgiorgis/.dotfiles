- name: Set up local workstation
  hosts: local
  vars:
    should_be_root: "{{ true if ansible_pkg_mgr != 'homebrew' else false }}"
  roles:
    # infrastructure
    - { role: infrastructure/bin-folder, tags: [bin-folder] }
    - { role: infrastructure/docker, tags: [docker] }
    - { role: infrastructure/fonts-firacode, tags: [fonts-firacode] }
    - { role: infrastructure/git, tags: [git] }
    - { role: infrastructure/github-ssh-key, tags: [github-ssh-key] }
    - { role: infrastructure/gparted, tags: [gparted] }
    - {
        role: infrastructure/linux-dconf-settings,
        tags: [linux-dconf-settings],
      }
    - {
        role: infrastructure/linux-gnome-extensions,
        tags: [linux-gnome-extensions],
      }
    - { role: infrastructure/linux-gnome-tweaks, tags: [linux-gnome-tweaks] }
    - {
        role: infrastructure/linux-initial-configuration,
        tags: [linux-initial-configuration],
      }
    - { role: infrastructure/linux-openssh, tags: [linux-openssh] }
    - { role: infrastructure/linux-redshift, tags: [linux-redshift] }
    - { role: infrastructure/linux-snap, tags: [linux-snap] }
    - { role: infrastructure/linux-terminator, tags: [linux-terminator] }
    - { role: infrastructure/macos-infra, tags: [macos-infra] }
    - {
        role: infrastructure/macos-initial-configuration,
        tags: [macos-initial-configuration],
      }
    # 2021-07-11: commented out due to following error messages:
    # ERROR! couldn't resolve module/action 'postgresql_user'. This often indicates a misspelling, missing collection, or incorrect module path.
    # ERROR! couldn't resolve module/action 'postgresql_db'. This often indicates a misspelling, missing collection, or incorrect module path.
    # ERROR! couldn't resolve module/action 'openssh_keypair'. This often indicates a misspelling, missing collection, or incorrect module path.
    # - { role: infrastructure/postgresql, tags: [postgresql] }
    - { role: infrastructure/ssh-key, tags: [ssh-key] }
    - { role: infrastructure/wallpaper, tags: [wallpaper] }
    - { role: infrastructure/zsh, tags: [zsh] }

    # pop-os specific
    - {
        role: infrastructure/popos-initial-configuration,
        tags: [popos-initial-configuration],
        when: ansible_os_family == "Pop!_OS" or ansible_os_family == "Debian",
      }
    - {
        role: infrastructure/linux-lightdm,
        tags: [linux-lightdm],
        when: ansible_os_family == "Pop!_OS",
      }

    # programming languages/frameworks managed by asdf
    - { role: infrastructure/asdf, tags: [asdf] }
    - { role: infrastructure/awscli, tags: [awscli] }
    - { role: infrastructure/gohugo, tags: [gohugo] }
    - { role: infrastructure/golang, tags: [golang] }
    - { role: infrastructure/nodejs, tags: [nodejs] }
    - { role: infrastructure/python, tags: [python] }
    - { role: infrastructure/python-poetry, tags: [python-poetry] }
    - { role: infrastructure/rust, tags: [rust] }
    - { role: infrastructure/terraform, tags: [terraform] }

    # TODO: Remove
    - { role: infrastructure/apt, tags: [apt] }

    # cli
    - { role: cli/awscliv2, tags: [awscliv2] }
    - { role: cli/broot, tags: [broot] }
    - { role: cli/common-cli, tags: [common-cli] }
    - { role: cli/exa, tags: [exa] }
    - { role: cli/gh, tags: [gh] }
    - { role: cli/linux-xclip, tags: [linux-xclip] }
    - { role: cli/macos-cli, tags: [macos-cli] }
    - { role: cli/mlocate, tags: [mlocate] }
    - { role: cli/neovim, tags: [neovim] }
    - { role: cli/noti, tags: [noti] }
    - { role: cli/taskwarrior, tags: [taskwarrior] }
    - { role: cli/timewarrior, tags: [timewarrior] }
    - { role: cli/vim, tags: [vim] }
    - { role: cli/youtube-dl, tags: [youtube-dl] }

    # software
    - { role: software/audacity, tags: [audacity] }
    - { role: software/authy, tags: [authy] }
    - { role: software/bitwarden, tags: [bitwarden] }
    - { role: software/brave-browser, tags: [brave-browser] }
    - { role: software/box-drive, tags: [box-drive] }
    - { role: software/dropbox, tags: [dropbox] }
    - { role: software/firefox, tags: [firefox] }
    - { role: software/flux, tags: [flux] }
    - { role: software/google-chrome, tags: [google-chrome] }
    - { role: software/jetbrains-toolbox, tags: [jetbrains-toolbox] }
    - { role: software/joplin, tags: [joplin] }
    - { role: software/kite, tags: [kite] }
    - { role: software/lastpass, tags: [lastpass] }
    - { role: software/lepton, tags: [lepton] }
    - { role: software/linux-blueman, tags: [linux-blueman] }
    - { role: software/linux-conky-manager, tags: [linux-conky-manager] }
    - { role: software/linux-fbreader, tags: [linux-fbreader] }
    - { role: software/linux-flameshot, tags: [linux-flameshot] }
    - { role: software/linux-kazam, tags: [linux-kazam] }
    - { role: software/linux-solaar, tags: [linux-solaar] }
    - { role: software/linux-timeshift, tags: [linux-timeshift] }
    - { role: software/linux-thunderbird, tags: [linux-thunderbird] }
    - { role: software/macos-shureplus-motiv, tags: [macos-shureplus-motiv] }
    - { role: software/meld, tags: [meld] }
    - { role: software/obs-studio, tags: [obs-studio] }
    - { role: software/plex, tags: [plex] }
    - { role: software/postman, tags: [postman] }
    - { role: software/rambox, tags: [rambox] }
    - { role: software/simplenote, tags: [simplenote] }
    - { role: software/signal, tags: [signal] }
    - { role: software/slack, tags: [slack] }
    - { role: software/spotify, tags: [spotify] }
    - { role: software/sqlite-browser, tags: [sqlite-browser] }
    - { role: software/sublime-merge, tags: [sublime-merge] }
    - { role: software/sublime-text, tags: [sublime-text] }
    - { role: software/teamviewer, tags: [teamviewer] }
    - { role: software/virtualbox, tags: [virtualbox] }
    - { role: software/vlc, tags: [vlc] }
    - { role: software/vscode, tags: [vscode] }
    - { role: software/whatsapp, tags: [whatsapp] }
    - { role: software/zoom, tags: [zoom] }

    # work
    - {
        role: work/work-macos-software,
        tags: [work-macos-software],
        when: ansible_os_family == "Darwin",
      }
